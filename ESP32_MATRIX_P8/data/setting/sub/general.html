<!DOCTYPE html>
<html lang="fr">

<head>
	<title>FSBrowserNG General Settings</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script src="./FSBrowserNG.js"></script>
	<link rel="stylesheet" href="/css/style.css">
</head>

<body style="border: none">

	<div class="card mb-4 d-flex justify-content-center" style="height: 570px">
		<form action="/admin/general.html" method="get">
			<div class="card-body d-flex justify-content-center">
				<div class="col-sm-9">
					<div class="row">
						<div class="col-sm-4">
							<h4>
								<label for="devicename">Name of Device</label>
							</h4>
						</div>
						<div class="col-sm-8">
							<input type="text" id="devicename" name="devicename" class="form-control form-control-sm" style="border: solid black;">
						</div>
					</div>
					<hr class="mb-4">
					<div class="row">
						<div class="button d-flex justify-content-end mb-4">
							<button class="btn btn-primary btn-block fa-lg gradient-custom-2 border border-color-none" style="margin-left: 20px; height: 40px;" id="submitButton" type="submit" >Valider</button>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>

	<script>
		let wifiConfig = null;

		window.onload = function () {
			fetch('/jsonFiles/config.json')
				.then(response => response.json())
				.then(data => {
					// use the 'data' variable which contains the parsed JSON data
					wifiConfig = data;
					document.getElementById('devicename').value = wifiConfig.deviceName;

				})
				.catch(error => {
					// handle any errors that occur during the fetch request
					console.error(error);
				});
		}
		
		let activityEvents = ['mousemove', 'keydown', 'scroll', 'click', 'keyup'];
		activityEvents.forEach(event => {
			window.addEventListener(event, updateExpiration);
		});

		function updateExpiration() {
			const connected = {
				value: true,
				expiration: new Date().getTime() + 5 * 60 * 1000
			};
			
			console.log("updateExpiration() called: ", connected);
			localStorage.setItem('connected', JSON.stringify(connected));
		}

	</script>

</body>

</html>
